summary: Tier 0 - QM Interconnect

environment:
     PASSWD: Aa123456

discover:
    how: fmf
    filter: tier:0

provision:
   how: local
#   how: connect
#   guest: 
#   user: root
#   password: 

prepare:
  - name: Prepare Repos
    how: shell
    script: |
        dnf install -y 	dnf-plugin-config-manager epel-release
        dnf config-manager -y --set-enabled crb
        dnf -y copr enable rhcontainerbot/qm centos-stream-9

  - name: install repos
    how: install
    package:
      - podman

  - name: Enable login
    how: shell
    script: |
         echo $PASSWD | passwd --stdin root
         sed 's/#PermitRootLogin prohibit-password/PermitRootLogin yes/' /etc/ssh/sshd_config
         systemctl restart sshd

context:
    distro: qm 

execute:
    how: tmt

report:
    how: junit
